<!DOCTYPE html><html lang="zh-CN" class="scroll-smooth dark"><head><meta charSet="utf-8"/><meta charSet="utf-8"/><link rel="stylesheet" href="/_next/static/css/26351ac1a6eca06c.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/7f6bd37aab40623f.css" data-precedence="next"/><title>HAN Blog</title><meta name="description" content="Created by HAN"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="\favicon.ico" type="image/x-icon" sizes="any"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" noModule=""></script></head><body><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="h-screen flex flex-col justify-between"><header class="flex items-center justify-around py-10"><div><a href="/"><div class="flex items-center justify-between"><div class="hidden h-6 text-2xl font-semibold sm:block"><a>HAN个人博客</a></div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/">主页</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/articles">文章</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">关于</a></div></div><div></div></header><main class="mb-auto"><main><div class="flex justify-center"><div class="prose dark:prose-invert mt-10"><h1>如何使用 ChatGPT 3.5 API 创建自己的智能应用？</h1><div class="items-center"><a href="articles">返回文档列表</a></div><div><h2>前言</h2>
<p>OPEN AI 的开放 API 可以说是前端开发者的福利，我们只需要调用 api，就可以创建一个智能应用，
在上一篇文章中，我们介绍了《基于 ChatGPT API 的划词翻译浏览器脚本实现》，使用的模型是 <code>text-davinci-003</code> 也就是文本补全模型，今天我们将使用 <code>gpt-3.5-turbo</code> 模型来实现一个场景化的智能应用。</p>
<h2>OPEN AI API 介绍</h2>
<h3>自动完成 API</h3>
<p><code>POST https://api.openai.com/v1/completions</code></p>
<p>以下是自动完成 API，有了 OPENAI_API_KEY 之后，我们只需要传入 prompt</p>
<pre><code>const OPENAI_API_KEY = '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'

const prompt = `Translate this into Chinese:
        hello world`
const res = await fetch('https://api.openai.com/v1/completions', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    authorization: `Bearer ${OPENAI_API_KEY}`,
  },
  body: JSON.stringify({
    model: 'text-davinci-003',
    prompt,
    max_tokens: 1000,
    temperature: 0,
  }),
})
const response = await res.json()

const result = response.choices[0].text
</code></pre>
<h3>对话 API</h3>
<p><code>POST https://api.openai.com/v1/chat/completions</code></p>
<p>由于自动补全 API 只能传入一个参数 prompt，AI 不能够理解上下文的场景，因此 gpt-3.5+ API 是为了让 AI 能够支持基于一组对话来返回数据。</p>
<p>在 Node.js 中可以使用以下代码来实现。</p>
<pre><code>const OPENAI_API_KEY = "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";

const prompt = [...];
const res = await fetch("https://api.openai.com/v1/chat/completions", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    authorization: `Bearer ${OPENAI_API_KEY}`,
  },
  body: JSON.stringify({
    model: "gpt-3.5-turbo",
    messages,
    temperature: 0.7,
    top_p: 1,
    frequency_penalty: 0,
    presence_penalty: 0,
    max_tokens: 500
  }),
});
const response = await res.json();

const result = response.choices[0].message
</code></pre>
<p>以下是官网给出 messages 例子</p>
<pre><code>const messages = [
  { role: 'system', content: 'You are a helpful assistant.' },
  { role: 'user', content: 'Who won the world series in 2020?' },
  { role: 'assistant', content: 'The Los Angeles Dodgers won the World Series in 2020.' },
  { role: 'user', content: 'Where was it played?' },
]
</code></pre>
<ul>
<li>每一个 message 由 <code>role</code> 和 <code>content</code> 组成。</li>
<li><code>role</code> 只能是 3 个值， <code>system</code>、<code>user</code> 和 <code>assistant</code></li>
<li><code>system</code> 和 <code>assistant</code> 是可选的，<code>user</code> 是必须的。</li>
</ul>
<p>官方提供了 <a href="https://platform.openai.com/playground?mode=chat">playground</a> 帮助我们创建 messages 信息。</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/35c1ce17ffe54bd6b61324951e46b2fe~tplv-k3u1fbpfcp-watermark.image?" alt="openai playground"></p>
<p><code>assistant</code> 也就是其中一次返回的数据信息。
发送的 messages 如下：</p>
<pre><code>const messages = [
  {
    role: 'system',
    content: '你是一名精通 typescript 的前端工程师，不需要解释',
  },
  {
    role: 'user',
    content:
      'Convert the following JSON to typescript interface without explanation\n\n{\n  "name": "Allen",\n  "age": 18\n}',
  },
]
</code></pre>
<p>比如使用上面的 messages 信息，我们就可以根据它，来创建一个 Tailwind css 代码生成器。</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3e7395aeaab74cf396d5539eb9d2f78e~tplv-k3u1fbpfcp-watermark.image?" alt="openai playground 拷贝 fetch"></p>
<p>通过右键可以直接拷贝为 Node.js fetch 代码。</p>
<p>再来实现一个 JSON 转 Typescript 的例子</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/048e56b8e89443469214a37a1f3511ae~tplv-k3u1fbpfcp-watermark.image?" alt="openai playground JSON 转 Typescript"></p>
<p>那么我们通过以上截图的 messages，就可以创建一个 JSON 转 Typescript 生成器。</p>
<h2>在 Next.js 使用</h2>
<p>接下来，我们就在 Next.js 中创建一个全栈应用。</p>
<p>那为什么选择使用 Next.JS 呢？</p>
<ol>
<li>它是一个全栈框架，既可以写接口也可以使用 react 写前端；</li>
<li>可以很轻松部署到 verel， 让我们可以直接访问 OPENAI 的接口，摆脱网络限制。</li>
</ol>
<p>这里我选择使用大圣老师的<a href="https://github.com/shengxinjing/email-helper">email-helper</a>模板</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/97358b3e64cb461bb85005093e5c0205~tplv-k3u1fbpfcp-watermark.image?" alt="创建github仓库"></p>
<p>点击 GitHub 选择 Use this Template， 创建一个自己的仓库</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9a597557faf540fa8be68b1564fe270a~tplv-k3u1fbpfcp-watermark.image?" alt="目录结构"></p>
<p>这个项目很简单，在 pages 目录下 <code>api/generate.ts</code> 用于代理请求接口。</p>
<p><code>index.tsx</code> 也就是我们的主界面，一个按钮，一个请求，没有其他复杂逻辑。</p>
<p>接下来我们就根据它来创建一个智能的<strong>Tailwind CSS 代码生成器</strong></p>
<p>1、首先将 messages 改成以上截图中的 message</p>
<p>2、然后将需要生成的变量存到 state 中，我们就可以实现如下界面</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/81421d407f4e4a7ebe0be7033dc59289~tplv-k3u1fbpfcp-watermark.image?" alt="Tailwind CSS 代码生成器界面"></p>
<p>点击生成代码就可以 让 ai 帮我们写代码了。</p>
<p>这个界面，有些单调，可以在这个页面上列一些常用的组件，那么也可以直接使用 chatGPT 来生成。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c4294a3e86b04fcba87750af06168ba5~tplv-k3u1fbpfcp-watermark.image?" alt="chatGPT 生成组件"></p>
<p>将 GPT 回答直接转换成 JSON 数据</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9ab9ad38ad9f481cacd9dcc989021f0a~tplv-k3u1fbpfcp-watermark.image?" alt="chatGPT 转 JSON 数据"></p>
<p>将数据渲染到页面中，就可以生成快捷标签了</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4b2a4e43a37849f88c3268748fd0af87~tplv-k3u1fbpfcp-watermark.image?" alt="实现效果"></p>
<p>接下来，再将 Tailwind css 的颜色，作为我们的变量，同样使用 GPT 来生成数据</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d2d3f014c9a4d89b6a2b14706d71858~tplv-k3u1fbpfcp-watermark.image?" alt="生成 Tailwind 颜色"></p>
<p>用同样的方式，转化成 JSON，拷贝到我们的代码中。</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/22953d0bc5014037a9c74b4aac6df6dd~tplv-k3u1fbpfcp-watermark.image?" alt="Tailwind CSS 代码生成器效果"></p>
<p>最后一步，我们需要实现一个预览效果，这样的话，就可以所见即所得，根据效果，直接拷贝想要的代码。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7950bdddf1c04b50b5e3a9564c9eaf1c~tplv-k3u1fbpfcp-watermark.image?" alt=""></p>
<h2>小结</h2>
<p>本文介绍了 openai 的 api 使用方法，以及如何使用 openai 的 playground 生成需要的 messages 信息。并且通过一个 Next.js 实战例子，结合 ChatGPT 开发了一个 Tailwind CSS 代码生成器。</p>
<h2>最后</h2>
<p>贴一下文本的代码仓库和预览地址</p>
<p>代码仓库：https://github.com/maqi1520/openai-helper</p>
<p>预览地址：https://openai.maqib.cn/</p>
<p>如果对你有帮助，记得给个三连，感谢你的阅读。</p>
<hr>
<p><strong><em>本文正在参加<a href="https://juejin.cn/post/7207698564641996856/" title="https://juejin.cn/post/7207698564641996856/">「金石计划」</a></em></strong></p>
</div><div class="items-center"><a href="articles">返回文档列表</a></div></div></div></main></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>© 2023</div><div> • </div><a href="/">HAN|博客</a></div></div></footer></div></div><div></div><script src="/_next/static/chunks/webpack-afd6b160f7b2e7a5.js" async=""></script><script src="/_next/static/chunks/2443530c-da705fa45a107f29.js" async=""></script><script src="/_next/static/chunks/139-a98e23425a4dfbf4.js" async=""></script><script src="/_next/static/chunks/main-app-06da1dca58d74c34.js" async=""></script></body></html><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/26351ac1a6eca06c.css\",{\"as\":\"style\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/_next/static/css/7f6bd37aab40623f.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"4:I{\"id\":\"7858\",\"chunks\":[\"272:static/chunks/webpack-afd6b160f7b2e7a5.js\",\"667:static/chunks/2443530c-da705fa45a107f29.js\",\"139:static/chunks/139-a98e23425a4dfbf4.js\"],\"name\":\"\",\"async\":false}\n6:I{\"id\":\"3055\",\"chunks\":[\"272:static/chunks/webpack-afd6b160f7b2e7a5.js\",\"667:static/chunks/2443530c-da705fa45a107f29.js\",\"139:static/chunks/139-a98e23425a4dfbf4.js\"],\"name\":\"\",\"async\":false}\n7:I{\"id\":\"414\",\"chunks\":[\"414:static/chunks/414-4c4d64a76277ff85.js\",\"345:static/chunks/app/articles/page/[slug]/page-b019257b"])</script><script>self.__next_f.push([1,"db7591a1.js\"],\"name\":\"\",\"async\":false}\n8:I{\"id\":\"9544\",\"chunks\":[\"272:static/chunks/webpack-afd6b160f7b2e7a5.js\",\"667:static/chunks/2443530c-da705fa45a107f29.js\",\"139:static/chunks/139-a98e23425a4dfbf4.js\"],\"name\":\"\",\"async\":false}\n9:I{\"id\":\"99\",\"chunks\":[\"272:static/chunks/webpack-afd6b160f7b2e7a5.js\",\"667:static/chunks/2443530c-da705fa45a107f29.js\",\"139:static/chunks/139-a98e23425a4dfbf4.js\"],\"name\":\"\",\"async\":false}\na:I{\"id\":\"1389\",\"chunks\":[\"120:static/chunks/120-384f50ccf38e1ade.js\",\"70:static/chunks/a"])</script><script>self.__next_f.push([1,"pp/articles/layout-8324812b78a65603.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/26351ac1a6eca06c.css\",\"precedence\":\"next\"}]],[\"$\",\"$L4\",null,{\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/articles/ok\",\"initialTree\":[\"\",{\"children\":[\"articles\",{\"children\":[[\"slug\",\"ok\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"ok\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[\"$L5\",null],\"globalErrorComponent\":\"$6\",\"notFound\":[\"$\",\"html\",null,{\"lang\":\"zh-CN\",\"className\":\"scroll-smooth dark\",\"children\":[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"body\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"h-screen flex flex-col justify-between\",\"children\":[[\"$\",\"header\",null,{\"className\":\"flex items-center justify-around py-10\",\"children\":[[\"$\",\"div\",null,{\"children\":[\"$\",\"$L7\",null,{\"href\":\"/\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between\",\"children\":[\"$\",\"div\",null,{\"className\":\"hidden h-6 text-2xl font-semibold sm:block\",\"children\":[\"$\",\"a\",null,{\"children\":\"HAN个人博客\"}]}]}]}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center text-base leading-5\",\"children\":[\"$\",\"div\",null,{\"className\":\"hidden sm:block\",\"children\":[[\"$\",\"$L7\",\"/\",{\"href\":\"/\",\"className\":\"p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4\",\"children\":\"主页\"}],[\"$\",\"$L7\",\"/articles\",{\"href\":\"/articles\",\"className\":\"p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4\",\"children\":\"文章\"}],[\"$\",\"$L7\",\"/about\",{\"href\":\"/about\",\"className\":\"p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4\",\"children\":\"关于\"}]]}]}],[\"$\",\"div\",null,{}]]}],[\"$\",\"main\",null,{\"className\":\"mb-auto\",\"children\":[[],[\"$\",\"div\",null,{\"className\":\"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"space-x-2 pt-6 pb-8 md:space-y-5\",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-6xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 md:border-r-2 md:px-6 md:text-8xl md:leading-14\",\"children\":\"404\"}]}],[\"$\",\"div\",null,{\"className\":\"max-w-md\",\"children\":[[\"$\",\"p\",null,{\"className\":\"mb-4 text-xl font-bold leading-normal md:text-2xl\",\"children\":\"抱歉，这个页面暂时没找到\"}],[\"$\",\"p\",null,{\"className\":\"mb-8\",\"children\":\"别急，您可以可以返回首页找找！\"}],[\"$\",\"$L7\",null,{\"href\":\"/\",\"children\":[\"$\",\"button\",null,{\"className\":\"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium leading-5 text-white shadow transition-colors duration-150 hover:bg-blue-700 focus:outline-none dark:hover:bg-blue-500\",\"children\":\"返回主页\"}]}]]}]]}]]}],[\"$\",\"footer\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"mt-16 flex flex-col items-center\",\"children\":[\"$\",\"div\",null,{\"className\":\"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400\",\"children\":[[\"$\",\"div\",null,{\"children\":\"© 2023\"}],[\"$\",\"div\",null,{\"children\":\" • \"}],[\"$\",\"$L7\",null,{\"href\":\"/\",\"children\":\"HAN|博客\"}]]}]}]}]]}]}],[\"$\",\"div\",null,{}]]}]]}],\"asNotFound\":false,\"children\":[[\"$\",\"html\",null,{\"lang\":\"zh-CN\",\"className\":\"scroll-smooth dark\",\"children\":[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"body\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"h-screen flex flex-col justify-between\",\"children\":[[\"$\",\"header\",null,{\"className\":\"flex items-center justify-around py-10\",\"children\":[[\"$\",\"div\",null,{\"children\":[\"$\",\"$L7\",null,{\"href\":\"/\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between\",\"children\":[\"$\",\"div\",null,{\"className\":\"hidden h-6 text-2xl font-semibold sm:block\",\"children\":[\"$\",\"a\",null,{\"children\":\"HAN个人博客\"}]}]}]}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center text-base leading-5\",\"children\":[\"$\",\"div\",null,{\"className\":\"hidden sm:block\",\"children\":[[\"$\",\"$L7\",\"/\",{\"href\":\"/\",\"className\":\"p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4\",\"children\":\"主页\"}],[\"$\",\"$L7\",\"/articles\",{\"href\":\"/articles\",\"className\":\"p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4\",\"children\":\"文章\"}],[\"$\",\"$L7\",\"/about\",{\"href\":\"/about\",\"className\":\"p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4\",\"children\":\"关于\"}]]}]}],[\"$\",\"div\",null,{}]]}],[\"$\",\"main\",null,{\"className\":\"mb-auto\",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"space-x-2 pt-6 pb-8 md:space-y-5\",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-6xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 md:border-r-2 md:px-6 md:text-8xl md:leading-14\",\"children\":\"404\"}]}],[\"$\",\"div\",null,{\"className\":\"max-w-md\",\"children\":[[\"$\",\"p\",null,{\"className\":\"mb-4 text-xl font-bold leading-normal md:text-2xl\",\"children\":\"抱歉，这个页面暂时没找到\"}],[\"$\",\"p\",null,{\"className\":\"mb-8\",\"children\":\"别急，您可以可以返回首页找找！\"}],[\"$\",\"$L7\",null,{\"href\":\"/\",\"children\":[\"$\",\"button\",null,{\"className\":\"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium leading-5 text-white shadow transition-colors duration-150 hover:bg-blue-700 focus:outline-none dark:hover:bg-blue-500\",\"children\":\"返回主页\"}]}]]}]]}],\"notFoundStyles\":[],\"asNotFound\":false,\"childProp\":{\"current\":[[\"$\",\"$La\",null,{\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"articles\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"articles\",\"children\",[\"slug\",\"ok\",\"d\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$Lb\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":\\\"ok\\\"}\"},\"styles\":[]}],\"segment\":[\"slug\",\"ok\",\"d\"]},\"styles\":[]}],\"params\":{}}],null],\"segment\":\"articles\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/7f6bd37aab40623f.css\",\"precedence\":\"next\"}]]}]}],[\"$\",\"footer\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"mt-16 flex flex-col items-center\",\"children\":[\"$\",\"div\",null,{\"className\":\"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400\",\"children\":[[\"$\",\"div\",null,{\"children\":\"© 2023\"}],[\"$\",\"div\",null,{\"children\":\" • \"}],[\"$\",\"$L7\",null,{\"href\":\"/\",\"children\":\"HAN|博客\"}]]}]}]}]]}]}],[\"$\",\"div\",null,{}]]}]]}],null]}]]\n"])</script><script>self.__next_f.push([1,"b:[\"$\",\"div\",null,{\"className\":\"flex justify-center\",\"children\":[\"$\",\"div\",null,{\"className\":\"prose dark:prose-invert mt-10\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"如何使用 ChatGPT 3.5 API 创建自己的智能应用？\"}],[\"$\",\"div\",null,{\"className\":\"items-center\",\"children\":[\"$\",\"$L7\",null,{\"href\":\"articles\",\"children\":\"返回文档列表\"}]}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ch2\u003e前言\u003c/h2\u003e\\n\u003cp\u003eOPEN AI 的开放 API 可以说是前端开发者的福利，我们只需要调用 api，就可以创建一个智能应用，\\n在上一篇文章中，我们介绍了《基于 ChatGPT API 的划词翻译浏览器脚本实现》，使用的模型是 \u003ccode\u003etext-davinci-003\u003c/code\u003e 也就是文本补全模型，今天我们将使用 \u003ccode\u003egpt-3.5-turbo\u003c/code\u003e 模型来实现一个场景化的智能应用。\u003c/p\u003e\\n\u003ch2\u003eOPEN AI API 介绍\u003c/h2\u003e\\n\u003ch3\u003e自动完成 API\u003c/h3\u003e\\n\u003cp\u003e\u003ccode\u003ePOST https://api.openai.com/v1/completions\u003c/code\u003e\u003c/p\u003e\\n\u003cp\u003e以下是自动完成 API，有了 OPENAI_API_KEY 之后，我们只需要传入 prompt\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003econst OPENAI_API_KEY = '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'\\n\\nconst prompt = `Translate this into Chinese:\\n        hello world`\\nconst res = await fetch('https://api.openai.com/v1/completions', {\\n  method: 'POST',\\n  headers: {\\n    'Content-Type': 'application/json',\\n    authorization: `Bearer ${OPENAI_API_KEY}`,\\n  },\\n  body: JSON.stringify({\\n    model: 'text-davinci-003',\\n    prompt,\\n    max_tokens: 1000,\\n    temperature: 0,\\n  }),\\n})\\nconst response = await res.json()\\n\\nconst result = response.choices[0].text\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003ch3\u003e对话 API\u003c/h3\u003e\\n\u003cp\u003e\u003ccode\u003ePOST https://api.openai.com/v1/chat/completions\u003c/code\u003e\u003c/p\u003e\\n\u003cp\u003e由于自动补全 API 只能传入一个参数 prompt，AI 不能够理解上下文的场景，因此 gpt-3.5+ API 是为了让 AI 能够支持基于一组对话来返回数据。\u003c/p\u003e\\n\u003cp\u003e在 Node.js 中可以使用以下代码来实现。\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003econst OPENAI_API_KEY = \\\"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\\\";\\n\\nconst prompt = [...];\\nconst res = await fetch(\\\"https://api.openai.com/v1/chat/completions\\\", {\\n  method: \\\"POST\\\",\\n  headers: {\\n    \\\"Content-Type\\\": \\\"application/json\\\",\\n    authorization: `Bearer ${OPENAI_API_KEY}`,\\n  },\\n  body: JSON.stringify({\\n    model: \\\"gpt-3.5-turbo\\\",\\n    messages,\\n    temperature: 0.7,\\n    top_p: 1,\\n    frequency_penalty: 0,\\n    presence_penalty: 0,\\n    max_tokens: 500\\n  }),\\n});\\nconst response = await res.json();\\n\\nconst result = response.choices[0].message\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e以下是官网给出 messages 例子\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003econst messages = [\\n  { role: 'system', content: 'You are a helpful assistant.' },\\n  { role: 'user', content: 'Who won the world series in 2020?' },\\n  { role: 'assistant', content: 'The Los Angeles Dodgers won the World Series in 2020.' },\\n  { role: 'user', content: 'Where was it played?' },\\n]\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cul\u003e\\n\u003cli\u003e每一个 message 由 \u003ccode\u003erole\u003c/code\u003e 和 \u003ccode\u003econtent\u003c/code\u003e 组成。\u003c/li\u003e\\n\u003cli\u003e\u003ccode\u003erole\u003c/code\u003e 只能是 3 个值， \u003ccode\u003esystem\u003c/code\u003e、\u003ccode\u003euser\u003c/code\u003e 和 \u003ccode\u003eassistant\u003c/code\u003e\u003c/li\u003e\\n\u003cli\u003e\u003ccode\u003esystem\u003c/code\u003e 和 \u003ccode\u003eassistant\u003c/code\u003e 是可选的，\u003ccode\u003euser\u003c/code\u003e 是必须的。\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cp\u003e官方提供了 \u003ca href=\\\"https://platform.openai.com/playground?mode=chat\\\"\u003eplayground\u003c/a\u003e 帮助我们创建 messages 信息。\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/35c1ce17ffe54bd6b61324951e46b2fe~tplv-k3u1fbpfcp-watermark.image?\\\" alt=\\\"openai playground\\\"\u003e\u003c/p\u003e\\n\u003cp\u003e\u003ccode\u003eassistant\u003c/code\u003e 也就是其中一次返回的数据信息。\\n发送的 messages 如下：\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003econst messages = [\\n  {\\n    role: 'system',\\n    content: '你是一名精通 typescript 的前端工程师，不需要解释',\\n  },\\n  {\\n    role: 'user',\\n    content:\\n      'Convert the following JSON to typescript interface without explanation\\\\n\\\\n{\\\\n  \\\"name\\\": \\\"Allen\\\",\\\\n  \\\"age\\\": 18\\\\n}',\\n  },\\n]\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e比如使用上面的 messages 信息，我们就可以根据它，来创建一个 Tailwind css 代码生成器。\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3e7395aeaab74cf396d5539eb9d2f78e~tplv-k3u1fbpfcp-watermark.image?\\\" alt=\\\"openai playground 拷贝 fetch\\\"\u003e\u003c/p\u003e\\n\u003cp\u003e通过右键可以直接拷贝为 Node.js fetch 代码。\u003c/p\u003e\\n\u003cp\u003e再来实现一个 JSON 转 Typescript 的例子\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/048e56b8e89443469214a37a1f3511ae~tplv-k3u1fbpfcp-watermark.image?\\\" alt=\\\"openai playground JSON 转 Typescript\\\"\u003e\u003c/p\u003e\\n\u003cp\u003e那么我们通过以上截图的 messages，就可以创建一个 JSON 转 Typescript 生成器。\u003c/p\u003e\\n\u003ch2\u003e在 Next.js 使用\u003c/h2\u003e\\n\u003cp\u003e接下来，我们就在 Next.js 中创建一个全栈应用。\u003c/p\u003e\\n\u003cp\u003e那为什么选择使用 Next.JS 呢？\u003c/p\u003e\\n\u003col\u003e\\n\u003cli\u003e它是一个全栈框架，既可以写接口也可以使用 react 写前端；\u003c/li\u003e\\n\u003cli\u003e可以很轻松部署到 verel， 让我们可以直接访问 OPENAI 的接口，摆脱网络限制。\u003c/li\u003e\\n\u003c/ol\u003e\\n\u003cp\u003e这里我选择使用大圣老师的\u003ca href=\\\"https://github.com/shengxinjing/email-helper\\\"\u003eemail-helper\u003c/a\u003e模板\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/97358b3e64cb461bb85005093e5c0205~tplv-k3u1fbpfcp-watermark.image?\\\" alt=\\\"创建github仓库\\\"\u003e\u003c/p\u003e\\n\u003cp\u003e点击 GitHub 选择 Use this Template， 创建一个自己的仓库\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9a597557faf540fa8be68b1564fe270a~tplv-k3u1fbpfcp-watermark.image?\\\" alt=\\\"目录结构\\\"\u003e\u003c/p\u003e\\n\u003cp\u003e这个项目很简单，在 pages 目录下 \u003ccode\u003eapi/generate.ts\u003c/code\u003e 用于代理请求接口。\u003c/p\u003e\\n\u003cp\u003e\u003ccode\u003eindex.tsx\u003c/code\u003e 也就是我们的主界面，一个按钮，一个请求，没有其他复杂逻辑。\u003c/p\u003e\\n\u003cp\u003e接下来我们就根据它来创建一个智能的\u003cstrong\u003eTailwind CSS 代码生成器\u003c/strong\u003e\u003c/p\u003e\\n\u003cp\u003e1、首先将 messages 改成以上截图中的 message\u003c/p\u003e\\n\u003cp\u003e2、然后将需要生成的变量存到 state 中，我们就可以实现如下界面\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/81421d407f4e4a7ebe0be7033dc59289~tplv-k3u1fbpfcp-watermark.image?\\\" alt=\\\"Tailwind CSS 代码生成器界面\\\"\u003e\u003c/p\u003e\\n\u003cp\u003e点击生成代码就可以 让 ai 帮我们写代码了。\u003c/p\u003e\\n\u003cp\u003e这个界面，有些单调，可以在这个页面上列一些常用的组件，那么也可以直接使用 chatGPT 来生成。\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c4294a3e86b04fcba87750af06168ba5~tplv-k3u1fbpfcp-watermark.image?\\\" alt=\\\"chatGPT 生成组件\\\"\u003e\u003c/p\u003e\\n\u003cp\u003e将 GPT 回答直接转换成 JSON 数据\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9ab9ad38ad9f481cacd9dcc989021f0a~tplv-k3u1fbpfcp-watermark.image?\\\" alt=\\\"chatGPT 转 JSON 数据\\\"\u003e\u003c/p\u003e\\n\u003cp\u003e将数据渲染到页面中，就可以生成快捷标签了\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4b2a4e43a37849f88c3268748fd0af87~tplv-k3u1fbpfcp-watermark.image?\\\" alt=\\\"实现效果\\\"\u003e\u003c/p\u003e\\n\u003cp\u003e接下来，再将 Tailwind css 的颜色，作为我们的变量，同样使用 GPT 来生成数据\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d2d3f014c9a4d89b6a2b14706d71858~tplv-k3u1fbpfcp-watermark.image?\\\" alt=\\\"生成 Tailwind 颜色\\\"\u003e\u003c/p\u003e\\n\u003cp\u003e用同样的方式，转化成 JSON，拷贝到我们的代码中。\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/22953d0bc5014037a9c74b4aac6df6dd~tplv-k3u1fbpfcp-watermark.image?\\\" alt=\\\"Tailwind CSS 代码生成器效果\\\"\u003e\u003c/p\u003e\\n\u003cp\u003e最后一步，我们需要实现一个预览效果，这样的话，就可以所见即所得，根据效果，直接拷贝想要的代码。\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7950bdddf1c04b50b5e3a9564c9eaf1c~tplv-k3u1fbpfcp-watermark.image?\\\" alt=\\\"\\\"\u003e\u003c/p\u003e\\n\u003ch2\u003e小结\u003c/h2\u003e\\n\u003cp\u003e本文介绍了 openai 的 api 使用方法，以及如何使用 openai 的 playground 生成需要的 messages 信息。并且通过一个 Next.js 实战例子，结合 ChatGPT 开发了一个 Tailwind CSS 代码生成器。\u003c/p\u003e\\n\u003ch2\u003e最后\u003c/h2\u003e\\n\u003cp\u003e贴一下文本的代码仓库和预览地址\u003c/p\u003e\\n\u003cp\u003e代码仓库：https://github.com/maqi1520/openai-helper\u003c/p\u003e\\n\u003cp\u003e预览地址：https://openai.maqib.cn/\u003c/p\u003e\\n\u003cp\u003e如果对你有帮助，记得给个三连，感谢你的阅读。\u003c/p\u003e\\n\u003chr\u003e\\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003e本文正在参加\u003ca href=\\\"https://juejin.cn/post/7207698564641996856/\\\" title=\\\"https://juejin.cn/post/7207698564641996856/\\\"\u003e「金石计划」\u003c/a\u003e\u003c/em\u003e\u003c/strong\u003e\u003c/p\u003e\\n\"}}],[\"$\",\"div\",null,{\"className\":\"items-center\",\"children\":[\"$\",\"$L7\",null,{\"href\":\"articles\",\"children\":\"返回文档列表\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"5:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"HAN Blog\"}],[\"$\",\"meta\",null,{\"name\":\"description\",\"content\":\"Created by HAN\"}],null,null,null,null,null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"\\\\favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}]],[],null]]\n"])</script>